#!/usr/bin/env sh

REPO_ROOT="$(cd "$(dirname "$0")/.." && pwd)"
PROJECT="$REPO_ROOT/VoiceType/VoiceType.csproj"

if command -v dotnet >/dev/null 2>&1 && [ -f "$PROJECT" ]; then
  if ! dotnet build "$PROJECT" -c Debug; then
    echo "[pre-push] Build failed. Please fix compilation errors before pushing."
    exit 1
  fi
elif [ -f "$PROJECT" ]; then
  echo "[pre-push] dotnet CLI not found. Install .NET SDK to run compile gate."
  exit 1
fi

exit 0
