#!/usr/bin/env sh

REPO_ROOT="$(cd "$(dirname "$0")/.." && pwd)"
SCRIPT="$REPO_ROOT/.githooks/restart-voicetype.ps1"

if [ "${SKIP_POST_COMMIT_RESTART:-}" = "1" ]; then
  exit 0
fi

if [ -f "$SCRIPT" ]; then
  if command -v pwsh >/dev/null 2>&1; then
    pwsh -NoProfile -ExecutionPolicy Bypass -File "$SCRIPT" -OnlyIfAppFileChanges
  elif command -v powershell >/dev/null 2>&1; then
    powershell -NoProfile -ExecutionPolicy Bypass -File "$SCRIPT" -OnlyIfAppFileChanges
  fi
fi

exit 0
